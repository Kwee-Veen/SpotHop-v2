import{s as P,n as z,r as R,o as q,b as B,a as j,c as W}from"../chunks/scheduler.c2vh5_Kn.js";import{S as G,i as X,e as f,s as y,c as h,a as b,f as _,b as D,g as F,h as o,k as H,l as d,j as L,n as M,p as A,o as J}from"../chunks/index.DYvIg-GN.js";import{e as O}from"../chunks/each.D6YF6ztN.js";import{e as K}from"../chunks/forms.BE_K5bEP.js";import{s as Q}from"../chunks/stores.B-gPtvMu.js";function S(u,a,l){const e=u.slice();return e[8]=a[l],e}function Y(u){let a,l=O(u[2].img),e=[];for(let t=0;t<l.length;t+=1)e[t]=N(S(u,l,t));return{c(){a=f("div");for(let t=0;t<e.length;t+=1)e[t].c();this.h()},l(t){a=h(t,"DIV",{class:!0});var c=b(a);for(let s=0;s<e.length;s+=1)e[s].l(c);c.forEach(_),this.h()},h(){o(a,"class","columns is-multiline is-mobile")},m(t,c){H(t,a,c);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(a,null)},p(t,c){if(c&4){l=O(t[2].img);let s;for(s=0;s<l.length;s+=1){const i=S(t,l,s);e[s]?e[s].p(i,c):(e[s]=N(i),e[s].c(),e[s].m(a,null))}for(;s<e.length;s+=1)e[s].d(1);e.length=l.length}},d(t){t&&_(a),J(e,t)}}}function N(u){let a,l,e,t,c,s,i,E="Delete",V,r,n,g,I,p='<button class="button"><span class="icon is-small"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="#FF0000" d="M170.5 51.6L151.5 80h145l-19-28.4c-1.5-2.2-4-3.6-6.7-3.6H177.1c-2.7 0-5.2 1.3-6.7 3.6zm147-26.6L354.2 80H368h48 8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-8V432c0 44.2-35.8 80-80 80H112c-44.2 0-80-35.8-80-80V128H24c-13.3 0-24-10.7-24-24S10.7 80 24 80h8H80 93.8l36.7-55.1C140.9 9.4 158.4 0 177.1 0h93.7c18.7 0 36.2 9.4 46.6 24.9zM80 128V432c0 17.7 14.3 32 32 32H336c17.7 0 32-14.3 32-32V128H80zm80 64V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16z"></path></svg></span></button>',m,v,k;return{c(){a=f("div"),l=f("div"),e=f("img"),c=y(),s=f("div"),i=f("b"),i.textContent=E,V=y(),r=f("form"),n=f("input"),g=y(),I=f("div"),I.innerHTML=p,m=y(),this.h()},l(w){a=h(w,"DIV",{class:!0});var x=b(a);l=h(x,"DIV",{class:!0});var C=b(l);e=h(C,"IMG",{src:!0,class:!0,alt:!0}),c=D(C),s=h(C,"DIV",{class:!0});var T=b(s);i=h(T,"B",{"data-svelte-h":!0}),F(i)!=="svelte-1j30tal"&&(i.textContent=E),V=D(T),r=h(T,"FORM",{method:!0,action:!0});var U=b(r);n=h(U,"INPUT",{type:!0,name:!0}),g=D(U),I=h(U,"DIV",{class:!0,"data-svelte-h":!0}),F(I)!=="svelte-1v4iwp7"&&(I.innerHTML=p),U.forEach(_),T.forEach(_),C.forEach(_),m=D(x),x.forEach(_),this.h()},h(){B(e.src,t=u[8])||o(e,"src",t),o(e,"class","image"),o(e,"alt","uploaded spot"),o(n,"type","hidden"),o(n,"name","deleteImageId"),n.value=u[8],o(I,"class","text has-text-centered"),o(r,"method","POST"),o(r,"action","?/deleteImage"),o(s,"class","column is-narrow has-text-centered"),o(l,"class","box p-2"),o(a,"class","column is-6")},m(w,x){H(w,a,x),d(a,l),d(l,e),d(l,c),d(l,s),d(s,i),d(s,V),d(s,r),d(r,n),d(r,g),d(r,I),d(a,m),v||(k=j(K.call(null,r)),v=!0)},p:z,d(w){w&&_(a),v=!1,k()}}}function Z(u){let a,l,e,t,c,s,i,E="Upload New Image",V,r,n,g,I,p=u[2].img&&Y(u);return{c(){a=f("form"),l=f("input"),e=y(),t=f("section"),c=f("div"),s=f("box"),i=f("button"),i.textContent=E,V=y(),r=f("div"),n=f("div"),p&&p.c(),this.h()},l(m){a=h(m,"FORM",{method:!0,action:!0});var v=b(a);l=h(v,"INPUT",{type:!0,placeholder:!0,name:!0}),v.forEach(_),e=D(m),t=h(m,"SECTION",{class:!0});var k=b(t);c=h(k,"DIV",{class:!0});var w=b(c);s=h(w,"BOX",{class:!0});var x=b(s);i=h(x,"BUTTON",{class:!0,"data-svelte-h":!0}),F(i)!=="svelte-1mfz90q"&&(i.textContent=E),x.forEach(_),w.forEach(_),V=D(k),r=h(k,"DIV",{class:!0});var C=b(r);n=h(C,"DIV",{class:!0});var T=b(n);p&&p.l(T),T.forEach(_),C.forEach(_),k.forEach(_),this.h()},h(){o(l,"type","hidden"),o(l,"placeholder","Image URL"),o(l,"name","returnedURL"),o(a,"method","POST"),o(a,"action","?/uploadImage"),o(i,"class","button is-danger"),o(s,"class","box"),o(c,"class","columns is-centered"),o(n,"class","column is-10"),o(r,"class","columns is-centered"),o(t,"class","content box has-background-link-light")},m(m,v){H(m,a,v),d(a,l),L(l,u[1]),u[7](a),H(m,e,v),H(m,t,v),d(t,c),d(c,s),d(s,i),d(t,V),d(t,r),d(r,n),p&&p.m(n,null),g||(I=[M(l,"input",u[6]),M(i,"click",A(u[3]))],g=!0)},p(m,[v]){v&2&&L(l,m[1]),m[2].img&&p.p(m,v)},i:z,o:z,d(m){m&&(_(a),_(e),_(t)),u[7](null),p&&p.d(),g=!1,R(I)}}}function $(u,a,l){Q.set("Edit Spot Images");let{widget:e}=a,{imageFiles:t}=a,{data:c}=a,s=c.spot,i;q(()=>{"cloudinary"in window&&l(4,e=window.cloudinary.createUploadWidget({cloudName:"dx2zbn7jb",uploadPreset:"cvcdhrcq"},(n,g)=>{console.log(g),g.event==="success"&&(l(1,i=g.info.secure_url),l(0,t.elements.returnedURL.value=g.info.secure_url,t),t.submit())}))});function E(){e&&e.open()}function V(){i=this.value,l(1,i)}function r(n){W[n?"unshift":"push"](()=>{t=n,l(0,t)})}return u.$$set=n=>{"widget"in n&&l(4,e=n.widget),"imageFiles"in n&&l(0,t=n.imageFiles),"data"in n&&l(5,c=n.data)},[t,i,s,E,e,c,V,r]}class ne extends G{constructor(a){super(),X(this,a,$,Z,P,{widget:4,imageFiles:0,data:5})}}export{ne as component};
