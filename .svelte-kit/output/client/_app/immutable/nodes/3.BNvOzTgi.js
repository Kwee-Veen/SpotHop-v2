const __vite__fileDeps=["../chunks/LeafletMap.B5sKYza1.js","../chunks/preload-helper.D6kgxu3v.js","../chunks/scheduler.Cu599fRN.js","../chunks/index.Ddz2UO3O.js","../assets/LeafletMap.HupOsEJb.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as Te}from"../chunks/preload-helper.D6kgxu3v.js";import{s as K,h as Se,n as B,r as Ve,d as J,i as ke,j as le,o as Me}from"../chunks/scheduler.Cu599fRN.js";import{S as Q,i as W,e as h,c as g,a as b,d as p,b as d,f as S,g as m,C as _e,m as ce,w as xe,n as Ce,o as Le,l as j,D as Ae,s as D,k as I,E as oe,q as F,j as G,r as U,z as He,u as q,t as z,h as N,v as R}from"../chunks/index.Ddz2UO3O.js";import{C as Oe}from"../chunks/Card.r-gv95RF.js";import{s as Pe}from"../chunks/stores.B6dslbLl.js";import{e as ve,S as Fe}from"../chunks/SpotList.B7ujIsSQ.js";import{p as Ue,i as qe,a as ze}from"../chunks/entry.Cdq6ZOis.js";import{L as Ne}from"../chunks/LeafletMap.B5sKYza1.js";function be(l,t,a){const n=l.slice();return n[3]=t[a],n}function ye(l){let t,a=l[3]+"",n;return{c(){t=h("option"),n=Ce(a),this.h()},l(e){t=g(e,"OPTION",{});var o=b(t);n=Le(o,a),o.forEach(p),this.h()},h(){t.__value=l[3],j(t,t.__value)},m(e,o){S(e,t,o),m(t,n)},p:B,d(e){e&&p(t)}}}function Re(l){let t,a,n,e,o,r=ve(l[1]),i=[];for(let s=0;s<r.length;s+=1)i[s]=ye(be(l,r,s));return{c(){t=h("div"),a=h("div"),n=h("select");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){t=g(s,"DIV",{class:!0});var f=b(t);a=g(f,"DIV",{class:!0});var c=b(a);n=g(c,"SELECT",{name:!0});var $=b(n);for(let T=0;T<i.length;T+=1)i[T].l($);$.forEach(p),c.forEach(p),f.forEach(p),this.h()},h(){d(n,"name","category"),l[0]===void 0&&Se(()=>l[2].call(n)),d(a,"class","select"),d(t,"class","control")},m(s,f){S(s,t,f),m(t,a),m(a,n);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(n,null);_e(n,l[0],!0),e||(o=ce(n,"change",l[2]),e=!0)},p(s,[f]){if(f&2){r=ve(s[1]);let c;for(c=0;c<r.length;c+=1){const $=be(s,r,c);i[c]?i[c].p($,f):(i[c]=ye($),i[c].c(),i[c].m(n,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=r.length}f&3&&_e(n,s[0])},i:B,o:B,d(s){s&&p(t),xe(i,s),e=!1,o()}}}function je(l,t,a){const n=["Site","Locale","Activity","Scenery","Structure","Shopping","Uncategorised"];let{selectedCategory:e="Uncategorised"}=t;function o(){e=Ae(this),a(0,e),a(1,n)}return l.$$set=r=>{"selectedCategory"in r&&a(0,e=r.selectedCategory)},[e,n,o]}class Be extends Q{constructor(t){super(),W(this,t,je,Re,K,{selectedCategory:0})}}function Xe(l){let t,a,n,e,o,r,i;return{c(){t=h("div"),a=h("input"),n=D(),e=h("div"),o=h("input"),this.h()},l(s){t=g(s,"DIV",{class:!0});var f=b(t);a=g(f,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,placeholder:!0,name:!0}),f.forEach(p),n=I(s),e=g(s,"DIV",{class:!0});var c=b(e);o=g(c,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,placeholder:!0,name:!0}),c.forEach(p),this.h()},h(){d(a,"class","input is-danger is-rounded"),d(a,"type","float"),d(a,"min","-90"),d(a,"max","90"),d(a,"step","0.00001"),d(a,"placeholder","Latitude"),d(a,"name","latitude"),a.required=!0,d(t,"class","field is-narrow"),d(o,"class","input is-danger is-rounded"),d(o,"type","float"),d(o,"min","-180"),d(o,"max","180"),d(o,"step","0.00001"),d(o,"placeholder","Longitude"),d(o,"name","longitude"),o.required=!0,d(e,"class","field is-narrow")},m(s,f){S(s,t,f),m(t,a),j(a,l[0]),S(s,n,f),S(s,e,f),m(e,o),j(o,l[1]),r||(i=[ce(a,"input",l[2]),ce(o,"input",l[3])],r=!0)},p(s,[f]){f&1&&j(a,s[0]),f&2&&j(o,s[1])},i:B,o:B,d(s){s&&(p(t),p(n),p(e)),r=!1,Ve(i)}}}function Je(l,t,a){let{latitude:n=0}=t,{longitude:e=0}=t;function o(){n=this.value,a(0,n)}function r(){e=this.value,a(1,e)}return l.$$set=i=>{"latitude"in i&&a(0,n=i.latitude),"longitude"in i&&a(1,e=i.longitude)},[n,e,o,r]}class Ge extends Q{constructor(t){super(),W(this,t,Je,Xe,K,{latitude:0,longitude:1})}}function Ke(l){const t=JSON.parse(l);return t.data&&(t.data=Ue(t.data)),t}function $e(l){return HTMLElement.prototype.cloneNode.call(l)}function Qe(l,t=()=>{}){const a=async({action:e,result:o,reset:r=!0,invalidateAll:i=!0})=>{o.type==="success"&&(r&&HTMLFormElement.prototype.reset.call(l),i&&await qe()),(location.origin+location.pathname===e.origin+e.pathname||o.type==="redirect"||o.type==="error")&&ze(o)};async function n(e){var y,L,w,C;if(((y=e.submitter)!=null&&y.hasAttribute("formmethod")?e.submitter.formMethod:$e(l).method)!=="post")return;e.preventDefault();const r=new URL((L=e.submitter)!=null&&L.hasAttribute("formaction")?e.submitter.formAction:$e(l).action),i=new FormData(l),s=(w=e.submitter)==null?void 0:w.getAttribute("name");s&&i.append(s,((C=e.submitter)==null?void 0:C.getAttribute("value"))??"");const f=new AbortController;let c=!1;const T=await t({action:r,cancel:()=>c=!0,controller:f,formData:i,formElement:l,submitter:e.submitter})??a;if(c)return;let u;try{const v=await fetch(r,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:i,signal:f.signal});u=Ke(await v.text()),u.type==="error"&&(u.status=v.status)}catch(v){if((v==null?void 0:v.name)==="AbortError")return;u={type:"error",error:v}}T({action:r,formData:i,formElement:l,update:v=>a({action:r,result:u,reset:v==null?void 0:v.reset,invalidateAll:v==null?void 0:v.invalidateAll}),result:u})}return HTMLFormElement.prototype.addEventListener.call(l,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(l,"submit",n)}}}function We(l){let t,a,n,e,o,r='<input class="input is-success" id="name" placeholder="Spot name" type="text" name="name" required=""/>',i,s,f,c,$,T,u,y,L,w,C,v='<input id="description" class="input is-success" type="text" placeholder="Enter description" name="description"/>',Y,Z,ee,M,ue='<button class="button is-danger is-rounded has-text-weight-bold is-size-5">Create Spot</button>',te,ae,se,x,A,H,O,ne,X,ie,de;function we(_){l[3](_)}let fe={};l[0]!==void 0&&(fe.selectedCategory=l[0]),s=new Be({props:fe}),J.push(()=>oe(s,"selectedCategory",we));function De(_){l[4](_)}function Ie(_){l[5](_)}let re={};return l[1]!==void 0&&(re.latitude=l[1]),l[2]!==void 0&&(re.longitude=l[2]),u=new Ge({props:re}),J.push(()=>oe(u,"latitude",De)),J.push(()=>oe(u,"longitude",Ie)),{c(){t=h("div"),a=h("form"),n=h("div"),e=h("div"),o=h("div"),o.innerHTML=r,i=D(),F(s.$$.fragment),c=D(),$=h("div"),T=D(),F(u.$$.fragment),w=D(),C=h("div"),C.innerHTML=v,Y=D(),Z=h("br"),ee=D(),M=h("div"),M.innerHTML=ue,te=D(),ae=h("br"),se=D(),x=h("div"),A=h("div"),H=h("div"),O=h("div"),ne=Ce(Ee),this.h()},l(_){t=g(_,"DIV",{class:!0,style:!0});var V=b(t);a=g(V,"FORM",{method:!0,action:!0});var E=b(a);n=g(E,"DIV",{class:!0});var P=b(n);e=g(P,"DIV",{class:!0});var k=b(e);o=g(k,"DIV",{class:!0,"data-svelte-h":!0}),G(o)!=="svelte-98ixt5"&&(o.innerHTML=r),i=I(k),U(s.$$.fragment,k),c=I(k),$=g(k,"DIV",{class:!0}),b($).forEach(p),T=I(k),U(u.$$.fragment,k),k.forEach(p),P.forEach(p),w=I(E),C=g(E,"DIV",{class:!0,"data-svelte-h":!0}),G(C)!=="svelte-ej73g9"&&(C.innerHTML=v),Y=I(E),Z=g(E,"BR",{}),ee=I(E),M=g(E,"DIV",{class:!0,"data-svelte-h":!0}),G(M)!=="svelte-zikyt2"&&(M.innerHTML=ue),te=I(E),ae=g(E,"BR",{}),se=I(E),x=g(E,"DIV",{class:!0});var me=b(x);A=g(me,"DIV",{class:!0});var pe=b(A);H=g(pe,"DIV",{class:!0});var he=b(H);O=g(he,"DIV",{class:!0});var ge=b(O);ne=Le(ge,Ee),ge.forEach(p),he.forEach(p),pe.forEach(p),me.forEach(p),E.forEach(p),V.forEach(p),this.h()},h(){d(o,"class","field is-narrow"),d($,"class","field is-narrow"),d(e,"class","field-body"),d(n,"class","field is-grouped-horizontal"),d(C,"class","field"),d(M,"class","text has-text-centered"),d(O,"class","content has-text-centered is-italic"),d(H,"class","box has-background-warning-light"),d(A,"class","column is-narrow"),d(x,"class","columns is-mobile is-centered"),d(a,"method","POST"),d(a,"action","?/create"),d(t,"class","box has-background-white"),He(t,"height","43vh")},m(_,V){S(_,t,V),m(t,a),m(a,n),m(n,e),m(e,o),m(e,i),q(s,e,null),m(e,c),m(e,$),m(e,T),q(u,e,null),m(a,w),m(a,C),m(a,Y),m(a,Z),m(a,ee),m(a,M),m(a,te),m(a,ae),m(a,se),m(a,x),m(x,A),m(A,H),m(H,O),m(O,ne),X=!0,ie||(de=ke(Qe.call(null,a)),ie=!0)},p(_,[V]){const E={};!f&&V&1&&(f=!0,E.selectedCategory=_[0],le(()=>f=!1)),s.$set(E);const P={};!y&&V&2&&(y=!0,P.latitude=_[1],le(()=>y=!1)),!L&&V&4&&(L=!0,P.longitude=_[2],le(()=>L=!1)),u.$set(P)},i(_){X||(z(s.$$.fragment,_),z(u.$$.fragment,_),X=!0)},o(_){N(s.$$.fragment,_),N(u.$$.fragment,_),X=!1},d(_){_&&p(t),R(s),R(u),ie=!1,de()}}}let Ee="Type in your new Spot's details above before hitting the red button";function Ye(l,t,a){let n="Uncategorised",e=0,o=0;function r(f){n=f,a(0,n)}function i(f){e=f,a(1,e)}function s(f){o=f,a(2,o)}return[n,e,o,r,i,s]}class Ze extends Q{constructor(t){super(),W(this,t,Ye,We,K,{})}}function et(l){let t,a='<div class="column is-3"><box class="box has-background-white"><h2 class="h2 has-text-centered">Spot List</h2></box></div>',n,e,o;return e=new Fe({props:{spots:l[0].spots}}),{c(){t=h("div"),t.innerHTML=a,n=D(),F(e.$$.fragment),this.h()},l(r){t=g(r,"DIV",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-12khktn"&&(t.innerHTML=a),n=I(r),U(e.$$.fragment,r),this.h()},h(){d(t,"class","columns is-mobile is-centered")},m(r,i){S(r,t,i),S(r,n,i),q(e,r,i),o=!0},p(r,i){const s={};i&1&&(s.spots=r[0].spots),e.$set(s)},i(r){o||(z(e.$$.fragment,r),o=!0)},o(r){N(e.$$.fragment,r),o=!1},d(r){r&&(p(t),p(n)),R(e,r)}}}function tt(l){let t,a,n,e,o,r,i,s,f,c,$;e=new Ze({});let T={height:43,activeLayer:"Terrain",data:l[0]};return s=new Ne({props:T}),l[2](s),c=new Oe({props:{$$slots:{default:[et]},$$scope:{ctx:l}}}),{c(){t=h("div"),a=h("div"),n=h("box"),F(e.$$.fragment),o=D(),r=h("div"),i=h("box"),F(s.$$.fragment),f=D(),F(c.$$.fragment),this.h()},l(u){t=g(u,"DIV",{class:!0});var y=b(t);a=g(y,"DIV",{class:!0});var L=b(a);n=g(L,"BOX",{class:!0});var w=b(n);U(e.$$.fragment,w),w.forEach(p),L.forEach(p),o=I(y),r=g(y,"DIV",{class:!0});var C=b(r);i=g(C,"BOX",{class:!0});var v=b(i);U(s.$$.fragment,v),v.forEach(p),C.forEach(p),y.forEach(p),f=I(u),U(c.$$.fragment,u),this.h()},h(){d(n,"class","box has-background-danger-light"),d(a,"class","column is-6"),d(i,"class","box"),d(r,"class","column is-6"),d(t,"class","columns is-mobile is-centered")},m(u,y){S(u,t,y),m(t,a),m(a,n),q(e,n,null),m(t,o),m(t,r),m(r,i),q(s,i,null),S(u,f,y),q(c,u,y),$=!0},p(u,[y]){const L={};y&1&&(L.data=u[0]),s.$set(L);const w={};y&9&&(w.$$scope={dirty:y,ctx:u}),c.$set(w)},i(u){$||(z(e.$$.fragment,u),z(s.$$.fragment,u),z(c.$$.fragment,u),$=!0)},o(u){N(e.$$.fragment,u),N(s.$$.fragment,u),N(c.$$.fragment,u),$=!1},d(u){u&&(p(t),p(f)),R(e),l[2](null),R(s),R(c,u)}}}function at(l,t,a){let{data:n}=t,e;Pe.set("Create a Spot"),Me(async()=>{await Te(()=>import("../chunks/LeafletMap.B5sKYza1.js").then(s=>s.l),__vite__mapDeps([0,1,2,3,4]),import.meta.url);const r=n.spots,i=r[r.length-1];if(i){const s=`Spot "${i.name}" (${i.latitude} ${i.longitude}), category: ${i.category}`;e.addMarker(i.latitude,i.longitude,s),e.moveTo(i.latitude,i.longitude)}});function o(r){J[r?"unshift":"push"](()=>{e=r,a(1,e)})}return l.$$set=r=>{"data"in r&&a(0,n=r.data)},[n,e,o]}class dt extends Q{constructor(t){super(),W(this,t,at,tt,K,{data:0})}}export{dt as component};
